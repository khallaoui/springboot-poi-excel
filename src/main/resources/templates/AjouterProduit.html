<!doctype html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
<head>

    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet"  th:href="@{/bootstrap.min.css}">
    <script type="text/javascript" th:src="@{/bootstrap.min.js}"></script>
    <script type="text/javascript" src="@{/jquery-3.6.1.js}"></script>
    <link rel="stylesheet" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css}">
    <meta charset="UTF-8">
    <link rel="stylesheet" href="close.css">
    <link rel="stylesheet" th:href="@{/checkbox.css}">
    <link rel="stylesheet" th:href="@{/boxCheck.css}">

    <!----======== CSS ======== -->
    <link rel="stylesheet" href="styleAddProd.css">
    <link rel="stylesheet" href="Button.css">
    <script type="text/javascript" src="button.js"></script>
    <!----===== Iconscout CSS ===== -->
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <style>


        nav {
            position: relative;
            padding-bottom: 12px;
        }
        nav .line {
            height: 2px;
            position: relative;
            bottom: 0;
            margin: 10px 0 0 0;
            background: #800080;
        }
        nav ul {
            padding: 0;
            margin: 0;
            list-style: none;
            display: flex;
        }
        nav ul li {
            margin: 0 40px 0 0;
            opacity: 0.4;
            transition: all 0.4s ease;
        }
        nav ul li:hover {
            opacity: 0.7;

        }
        nav ul li.active {
            opacity: 1;
        }
        nav ul li:last-child {
            margin-right: 0;
        }
        nav ul li a:hover{
            color: #800080;
        }
        nav ul li a {
            text-decoration: none;
            color: gray;
            text-transform: uppercase;
            display: block;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            letter-spacing: 0.1em;
            font-size: 17px;
        }
        input{
           color: #808080;font-family: 'Poppins', sans-serif;font-size: 15px;      }

        /**/
        .inputs-container {
            margin-top: 20px;
        }

        .x {
            display: none;
        }

    </style>
</head>
<body>
<div th:replace="NAvBAR :: navbar"></div>

<div class="container">
    <a type="button" class="close btn-close pull-right " th:href="@{/listProduits}"></a>
    <header class="Dett" ><i class="fa-solid fa-carrot" style="color: #864d7f"></i>Ingredient</header>
    <form   th:action="@{/PostaddProd}" method="post" th:object="${Produits}"  id="MyForm">
        <div class="form first">
            <div class="details personal">
                <div class="fields">
                    <div class="input-field">
                        <label>Nom</label>
                        <input  type="text" th:field="*{nom}"  placeholder="Enter le nom du ingrédient" required>
                    </div>

                    <div class="input-field">
                        <label>Unité</label>
                        <input type="text" th:field="*{unite}" placeholder="Enter l'unité du ingrédient" required>
                    </div>
                    <div class="input-field">
                        <label>Prix initial</label>
                        <input type="text" th:field="*{prix_initial}"  placeholder="Enter le prix initial du ingréddient" required>
                    </div>
                    <div class="input-field">
                        <label>TVA</label>
                        <select name="tva" th:field="*{tva}"  id="tva">
                            <option value="0"  selected="select">Aucune</option>
                            <option value="10" selected="select">10%</option>
                            <option value="20" selected="select">20%</option>
                            <option value="5" selected="select">5%</option>
                        </select>
                    </div>
                    <div class="input-field">
                        <label>Code barre</label>
                        <input type="text" th:field="*{code_barre}"  placeholder="Enter le code barre du ingréddient" >
                    </div>

                    <div class="input-field">
                        <label for="categorie">Catégorie</label>
                        <select  id="categorie" th:field="*{categorie.id}" name="categorie">
                            <th:block th:each="categorie : ${categories}">
                                <option th:value="${categorie.id}" th:text="${categorie.libelle}"></option>
                            </th:block>
                        </select>
                    </div>

                    <div class="input-field">
                        <input class="checkbox-effect checkbox-effect-4" id="make-bed-4"
                               type="checkbox" value="make-bed-4" name="make-bed-4"/>
                        <label for="make-bed-4">Expiration</label>
                    </div>
                    <div class="input-field"> </div>

                    <!-- Vos éléments d'entrée -->
                    <button class="nextBtn pull-right">
                        <span class="btnText">Ajouter </span>
                        <i class="uil uil-navigator"></i>
                    </button>
                    <div class="input-field"> </div>
                    <div class="input-field"> </div>
                    <div class="input-field"> </div>
                    <nav >
                        <ul>

                            <li id="toggleInputs3"><a href="">Zones de stockage</a></li>
                            <li style="opacity: 1" id="toggleInputs2" ><a href="">LES LOTS</a></li>
                            <li id="toggleInputs"><a href="">Détails</a></li>

                        </ul>
                    </nav>
                    <div class="input-field"> </div>
                    <div class="input-field"> </div>
                    <div class="input-field"> </div>
                    <div class="input-field"> </div>

                    <div class="input-field x">
                        <label>Stock minimum</label>
                        <input type=txt   th:field="*{stock_minimum}" placeholder="Enter le stock minimum du ingrédient" class="stock"required>
                    </div>
                    <div class="input-field x">
                        <label>Stock maximum</label>
                        <input type="text" th:field="*{stock_maximum}"  placeholder="Enter le stock maximum du ingrédient" class="stock" required>
                    </div>
                    <div class="input-field x"></div>

                    <div class="input-field x">
                        <label>Stock en-cours</label>
                        <input type="text"  th:field="*{stock_en_cours}" class="stock" placeholder="Enter le stock en-cours du ingrédient" required>
                    </div>

                    <div class="input-field x">
                        <label>Nombre des jours apès l'ouverture</label>
                        <input type="number" th:field="*{nbr_jr_apres_ouverture}"  placeholder="Enter le nombre du jour après l'ouverture" required>
                    </div>
                    <div class="input-field x"></div>
                    <div class="input-field x">
                        <label>Description</label>
                        <textarea th:field="*{description}" name="decription" id="description" class="form-control col-md-2" cols="45" rows="8" placeholder="note"></textarea>
                    </div>

                    <div class="x" th:each="marque : ${marques}">

                        <div class="input-field">
                            <input th:value="" class="checkbox-effect checkbox-effect-4" id="make-bed-5"
                                   type="checkbox" value="make-bed-4" name="make-bed-4"/>
                            <label for="make-bed-4" th:text="${marque.libelle}"></label>
                        </div>
                        <!--checkbox 1-->
                    </div>
                    <div class="input-field xx"></div>
                    <div style="display: inline-block;" class="xx justify-content-center">
                            <div class="containerTab pull-right justify-content-center" style="margin-left: 1%;margin-top: 3%">

                                <table class="table" style="position: relative" id="myTable">
                                    <thead>
                                    <tr style="color: #b9d932;font-family: 'Poppins', sans-serif;font-size: 14px">
                                        <th scope="">N° Lot</th>
                                        <th scope="">Date d'areivée</th>
                                        <th scope="">Date d'éxpiration</th>
                                        <th scope="">Quantité</th>
                                        <th scope="">Nombre du jour</th>
                                        <th scope="">Description</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td><input class='InputTab xx' type="text" name="lots[0].numero_Lot"></td>
                                        <td><input class='InputTab xx' type="date"    style="color: grey" name="lots[0].date_arrivee_lot"></td>
                                        <td><input class='InputTab xx' type="date" style="color: grey" name="lots[0].date_expiration"></td>
                                        <td><input class='InputTab xx' type="text"   name="lots[0].qte"></td>
                                        <td><input class='InputTab xx' type="text"   name="lots[0].nbr_jr_avant_Expiration"></td>
                                        <td><input class='InputTab xx' type="text"   name="lots[0].description"></td>
                                    </tr>
                                    </tbody>
                                </table>
                                <label class="Det" onclick="addRow()">Ajouter une ligne</label>
                            </div>
                        </div>
                    <div style="display: inline-block;" class="y justify-content-center">
                        <div class="containerTab pull-right " style="text-align: left; justify-content: left; margin-top: 3%">
                            <table class="table" style="position: relative" id="TableZone">
                                <thead>
                                <tr style="color: #b9d932;font-family: 'Poppins', sans-serif;font-size: 14px">
                                    <th scope="">Designation</th>
                                    <th scope="">Quantité</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td><select  class="InputTab" id="zone" name="ZoneId">
                                        <th:block th:each="zone : ${Zones}">
                                            <option name="zone.designatioon" th:value="${zone.id}" th:text="${zone.designation}" ></option>
                                        </th:block>
                                    </select>
                                        </td>
                                    <td><input class='InputTab'th:value="${ZoneProduit.qte_Produit}" type="text" name="qte_Produit"></td>
                                </tr>
                                </tbody>
                            </table>
                            <label class="Det" onclick="addRow1()">Ajouter une ligne</label>
                        </div>
                    </div>
                </div>
                </div></div>
    </form>
</div>
<script !src="">
/*****************************************/
$(document).ready(function() {
    // Masquer les éléments d'entrée au chargement de la page
    $(".x, .xx,.y").hide();

    // Ajouter un gestionnaire d'événements sur le bouton "Détails"
    $("#toggleInputs").click(function() {
        // Masquer les éléments de la classe "xx"
        $(".xx").hide(); $(".y").hide();
        // Afficher les éléments de la classe "x"
        $(".x").show();
    });

    // Ajouter un gestionnaire d'événements sur le bouton "Les lots"
    $("#toggleInputs2").click(function() {
        // Masquer les éléments de la classe "x"
        $(".x").hide();    $(".y").hide();
        // Afficher les éléments de la classe "xx"
        $(".xx").show();
    });
    $("#toggleInputs3").click(function() {
        // Masquer les éléments de la classe "x"
        $(".x").hide();    $(".xx").hide();
        // Afficher les éléments de la classe "xx"
        $(".y").show();
    });
});

/***********************************************/
/***********************************************/
var nav = $('nav');
var line = $('<div />').addClass('line');

line.appendTo(nav);

var active = nav.find('.active');
var pos = 0;
var wid = 0;

if(active.length) {
    pos = active.position().left;
    wid = active.width();
    line.css({
        left: pos,
        width: wid
    });
}

nav.find('ul li a').click(function(e) {
    e.preventDefault();
    if(!$(this).parent().hasClass('active') && !nav.hasClass('animate')) {

        nav.addClass('animate');

        var _this = $(this);

        nav.find('ul li').removeClass('active');

        var position = _this.parent().position();
        var width = _this.parent().width();

        if(position.left >= pos) {
            line.animate({
                width: ((position.left - pos) + width)
            }, 300, function() {
                line.animate({
                    width: width,
                    left: position.left
                }, 150, function() {
                    nav.removeClass('animate');
                });
                _this.parent().addClass('active');
            });
        } else {
            line.animate({
                left: position.left,
                width: ((pos - position.left) + wid)
            }, 300, function() {
                line.animate({
                    width: width
                }, 150, function() {
                    nav.removeClass('animate');
                });
                _this.parent().addClass('active');
            });
        }

        pos = position.left;
        wid = width;
    }
});
function addRow() {
    // Récupérer le tableau et ajouter une nouvelle ligne vide à la fin
    var table = document.getElementById("myTable");
    var row = table.insertRow(-1);
    var rowCount = table.rows.length;
    // Ajouter les cellules pour les champs de saisie
    var numero = row.insertCell(0);
    var datearr = row.insertCell(1);
    var dateex = row.insertCell(2);
    var qte = row.insertCell(3);
    var nbJour = row.insertCell(4);
    var desc = row.insertCell(5);
    numero.innerHTML = "<input  class='InputTab xx' type='text' name='lots[" + (rowCount -2) + "].numero_Lot'>";
    datearr.innerHTML = "<input  class='InputTab xx' type='date' name='lots[" + (rowCount -2) + "].date_arrivee_lot'>";
    dateex.innerHTML = "<input  class='InputTab xx' type='date' name='lots[" + (rowCount -2) + "].date_expiration'>";
    qte.innerHTML = "<input class='InputTab xx' type='text' name='lots[" + (rowCount -2) + "].qte'>";
    nbJour.innerHTML = "<input class='InputTab xx' type='text' name='lots[" + (rowCount -2) + "].nbr_jr_avant_Expiration'>";
    desc.innerHTML = "<input class='InputTab xx' type='text' name='lots[" + (rowCount -2) + "].description'>";
}

function addRow1() {
    // Récupérer le tableau et ajouter une nouvelle ligne vide à la fin
    var table = document.getElementById("TableZone");
    var row = table.insertRow(-1);
    // Ajouter les cellules pour les champs de saisie
    var designation = row.insertCell(0);
    var qte_Produit = row.insertCell(1);
    designation.innerHTML = "<input  class='InputTab' type='text' name='designation'>";
    qte_Produit.innerHTML = "<input class='InputTab' type='text' name='qte_Produit'>";
}
</script>
</body>
</html>
<!--
/*$(document).ready(function() {
// Masquer les éléments d'entrée au chargement de la page
$(".x").hide();

// Ajouter un gestionnaire d'événements sur le bouton de basculement
$("#toggleInputs").click(function() {
// Basculez la visibilité des éléments d'entrée
$(".x").toggle();

// Modifier le texte du bouton
if ($("#toggleInputs").text() == "Moins de détails") {
$("#toggleInputs").text("Plus de détails");
} else {
$("#toggleInputs").text("Moins de détails");
}
});
});$(document).ready(function() {
// Masquer les éléments d'entrée au chargement de la page
$(".x").hide();

// Ajouter un gestionnaire d'événements sur le bouton de basculement
$("#toggleInputs").click(function() {
// Basculez la visibilité des éléments d'entrée
$(".x").toggle();

// Modifier le texte du bouton
if ($("#toggleInputs").text() == "Moins de détails") {
$("#toggleInputs").text("Plus de détails");
$(".nextBtn").appendTo($(".container").children().last());
} else {
$("#toggleInputs").text("Moins de détails");
$(".nextBtn").appendTo($(".container").children().position());
}
});
});*/-->
